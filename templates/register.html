{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>
        MazaoOnline | Register
    </title>
    <link rel="stylesheet" href="{% static 'css/signin.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" type="text/css">
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <style>
        body {
            background: -webkit-linear-gradient(top, #33537a 0%,#00912b 100%); /* Chrome10+,Safari5.1+ */
        }
    </style>
</head>

<body class="text-center">
<form name="registerForm" id="form_register" class="form-signin" method="POST">{% csrf_token %}
    <img class="mb-4" src="https://getbootstrap.com/assets/brand/bootstrap-solid.svg" alt="" width="72" height="72">
    <h1 style="color: #fff" class="h3 mb-3 font-weight-bolder">Please Register</h1>

    <label for="username" class="sr-only">Username</label>
    <input type="text" id="username" class="form-control mb-2" placeholder="Username" name="username" required autofocus>

    <label for="firstname" class="sr-only">First Name</label>
    <input type="text" id="firstname" class="form-control mb-2" placeholder="First Name" name="first_name" required autofocus>

    <label for="lform_registerastname" class="sr-only">Last Name</label>
    <input type="text" id="lastname" class="form-control mb-2" placeholder="Last Name" name="last_name" required autofocus>

    <label for="password1" class="sr-only">Password</label>
    <input type="password" id="password1" class="form-control mb-2" name="password" placeholder="Password" required autofocus>

    <label for="password2" class="sr-only">Confirm Password</label>
    <input type="password" id="password2" class="form-control mb-2" name="password2" placeholder="Confirm Password" required autofocus>

    <button class="btn btn-lg btn-primary btn-block" type="submit" onclick="return validate();">Register</button>
    <p style="color: #fff" class="mt-2 font-weight-bolder">Already have an account? <a href="{% url 'login_view' %}"><span style="color: #fff;">Sign in</span></a></p>
    <p style="color: #fff" class="mt-3 mb-3 font-weight-bolder">&copy;MazaoOnline <span id="date"></span></p>
</form>
<script type="text/javascript">
    var date = new Date();
    var date_p = document.getElementById("date");
    date_p.innerHTML = date.getFullYear();
    
    function validate(){
        if(document.registerForm.username.value == ""){
        document.registerForm.username.focus();
            return false;
        } else if(document.registerForm.first_name.value == ""){
        document.registerForm.first_name.focus();
            return false;
        } else if(document.registerForm.last_name.value == ""){
        document.registerForm.last_name.focus();
            return false;
        }

        if(document.registerForm.password1.value !== document.registerForm.password2.value){
            alert("Password not matching");
            document.registerForm.password1.focus();
        } else {
            return true;
        }

        // Checking for the bad inputs
        if (!/^[a-zA-Z]*$/g.test(document.registerForm.firstname.value)) {
            $(".firstname_error").remove();
            $("<span class='firstname_error' style='color: green;font-weight: bold;'> </span>")
                .insertAfter("#firstname");
            document.registerForm.firstname.focus();
            $("<span class='firstname_error' style='color: red;font-weight: bold;'>Invalid characters for Firstname</span>").insertAfter("#firstname");
            document.registerForm.firstname.focus();
            return false;
        } else {
            $(".lastname_error").remove();
            $("<span class='lastname_error' style='color: green;font-weight: bold;'> </span>")
                .insertAfter("#lastname");
            document.registerForm.lastname.focus();
        }

        if (!/^[a-zA-Z]*$/g.test(document.registerForm.lastname.value)) {
            $(".lastname_error").remove();
            $("<span class='lastname_error' style='color: green;font-weight: bold;'> </span>")
                .insertAfter("#lastname");
            document.registerForm.lastname.focus();
            $("<span class='lastname_error' style='color: red;font-weight: bold;'>Invalid characters for lastname</span>").insertAfter("#lastname");
            document.registerForm.lastname.focus();
            return false;
        } else {
            $(".username_error").remove();
            $("<span class='username_error' style='color: green;font-weight: bold;'> </span>")
                .insertAfter("#username");
            document.registerForm.username.focus();
        }

        if (!/^[a-zA-Z]*$/g.test(document.registerForm.username.value)) {
            $(".username_error").remove();
            $("<span class='username_error' style='color: green;font-weight: bold;'> </span>")
                .insertAfter("#username");
            document.registerForm.username.focus();
            $("<span class='username_error' style='color: red;font-weight: bold;'>Invalid characters for username</span>").insertAfter("#username");
            document.registerForm.username.focus();
            return false;
        } else {
            $(".username_error").remove();
            $("<span class='username_error' style='color: green;font-weight: bold;'> </span>")
                .insertAfter("#username");
            document.registerForm.username.focus();
        }
    }
</script>
</body>
</html>
